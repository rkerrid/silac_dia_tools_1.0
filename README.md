# About
A collection of tools to process data from SILAC experiments analyzed in DIA mode.  

# Usage
This package contains modules that can be used to process the report.tsv generated by DIANN with SILAC settings. 
The pipeline module works by:
1) Filtering the report.tsv
2) Formatting the file so precursors contain H, M, and L channels, as well as using the MS1 translated values as intensities for each channel
3) Extracting protein level ratios results in a csv file containing protein groups rolled up from the precursor level
4) Calculating protein intensites either by stacking intensity channels and passing the precursors to directLFQ (https://github.com/MannLabs/directlfq) or by using a heavy reference to normalize intensities accross runs

The label check works by:
1) Extracting the highest heavy intensity from the MQ .txt files and locating the scan number
2) Accessing the MS1 data from the .raw file is performed with alphapept ([https://github.com/MannLabs](https://github.com/MannLabs/alphapept)) and then plotted to compare the relative H and L peaks in the heavy spike-in sample

Adtitionally see example scripts (still in progress).


## Installation

Follow the steps below to install the package:

First clone the repository to your directory - git clone [https://github.com/rkerrid/silac_dia_tools.git](https://github.com/rkerrid/silac_dia_tools_1.0.git)

Then with conda:

1. **Create a new conda environment:**
   ```bash
   conda create --name myenv python=3.8
   ```
   
2. **Activate the conda environment:**
   ```bash
   conda activate myenv
   ```

3. **Navigate to the folder where the package was cloned:**
   ```bash
   cd path/to/your/package
   ```
   
4. **Install the package:**
   ```bash
   pip install .
   ```

> **Note:** There are some known bugs related to the path configurations for certain JSON files. Work is in progress to resolve these issues.



## DIANN Settings before beggining pipeline
Requires a report.tsv file generated by DIANN version 1.8.1 using the following SILAC settings (choose SILAC labels relevant for your experiment):

 Additional Options
 
--fixed-mod SILAC,0.0,KR,label
--lib-fixed-mod SILAC   
For Tripple SILAC: --channels SILAC,L,KR,0:0;SILAC,M,KR,4.0251069836:6.0201290267999;SILAC,H,KR,8.014199:10.008269   
For Double SILAC: --channels SILAC,L,KR,0:0;SILAC,H,KR,8.014199:10.008269   
--peak-translation   
--original-mods  
--no-norm   
--no-maxlfq   
--peak-center

Switch MBR off

> **Note:** The filtering script contains a remove_contaminants() function that looks for a _cont suffix label on Protein.Groups, the report.tsv should be annotated in the following way or the function should be adjusted to filter out contaminants.

## Label check requirements
The label check module requires a thermo .raw file for the heavy spike-in aquired in DDA mode. After processing this file with MQ with requantify switched on, the resulting msms.txt and evidence.txt are used along with the .raw file to automate the label check and calculate labeling efficiency (still in progress).

# Version
1.0.0

Notes: 1.0.0 is a stable realease including all core features for the pipeline and label check.

